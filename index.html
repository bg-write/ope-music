<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPE! - Music Reviews by Brady Gerber</title>
    <meta name="description" content="Music sucks.">
    <meta name="keywords" content="music discovery, song of the week, music recommendations, indie music, new music">
    <meta name="author" content="Brady Gerber">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="OPE! - Music Reviews by Brady Gerber">
    <meta property="og:description" content="Music sucks.">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="OPE! - Music Reviews by Brady Gerber">
    <meta name="twitter:description" content="Music sucks.">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
</head>
<body>
    <!-- Skip Navigation Link for Screen Readers -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Header Section with logo and tagline -->
    <!-- Contains the main title, subtitle, and animated logo image -->
    <header class="header-content" role="banner">
        <div class="header-text">
            <h1>OPE!</h1>
            <p>Music reviews by Brady Gerber</p>
            <p>Fueled by corn and spite</p>
        </div>
        <div class="header-image">
            <img src="images/logo.png" alt="OPE! Logo - Animated music note icon" class="logo">
        </div>
    </header>

    <!-- Navigation tabs for switching between different content sections -->
    <!-- Each tab loads content dynamically without page refresh -->
    <nav class="nav" role="navigation" aria-label="Main navigation">
        <a href="#" onclick="showContent('free')" id="free-link" role="tab" aria-selected="true" aria-controls="content-container">Songs</a>
        <a href="#" onclick="showContent('newsletter')" id="newsletter-link" role="tab" aria-selected="false" aria-controls="content-container">Newsletter</a>
        <a href="#" onclick="showContent('podcast')" id="podcast-link" role="tab" aria-selected="false" aria-controls="content-container">Podcast</a>
        <!-- <a href="#" onclick="showContent('email')" id="email-link" role="tab" aria-selected="false" aria-controls="content-container">Email</a> -->
        <!-- <a href="#" onclick="showContent('albums')" id="albums-link" role="tab" aria-selected="false" aria-controls="content-container">Album Reviews</a> -->
        <!-- <a href="#" onclick="showContent('members')" id="members-link" role="tab" aria-selected="false" aria-controls="content-container">Exclusive Member Content</a> -->
    </nav>

    <!-- Content Container - dynamically populated by JavaScript -->
    <!-- Content is loaded from the 'content' object below, which gets updated by build.js -->
    <main id="main-content" role="main" aria-live="polite" aria-label="Page content">
        <div id="content-container">
            <!-- Content will be loaded here dynamically -->
            <p>Content will be loaded from Markdown files...</p>
        </div>
    </main>

    <!-- Floating Back to Top Button -->
    <button id="back-to-top" class="back-to-top-btn" aria-label="Back to top of page" title="Back to top">
        ↑
    </button>

    <script>
        // Content data - This will be populated by the build script
        // Each tab has a title and HTML content that gets injected into the page
        const content = {
            free: {
                title: "Songs",
                html: `
        <div class="section">
            <div class="search-section">
                <input type="text" id="song-search" placeholder="Search for artist or song..." onkeyup="searchSongs()">
                <p class="search-help">Type a song title (e.g., "Like a Rolling Stone") or artist name to search</p>
            </div>
            
            
            <div class="song-entry" id="wednesday-bitter-everyday-song-review" data-artist="wednesday  bitter everyday">
                <h3 class="song-title">Wednesday - "Bitter Everyday"</h3>
                <p class="song-rating">0.5/4</p>
                <p class="song-date">August 19, 2025</p>
                <p class="song-description">I'd rather lick Kid Rock's dinghy than listen to any more 2020s shoegaze. Even mildew and regret got bored by this song.</p>
                <div class="song-links">
                    <a href="https://youtu.be/qGNRGk5TOLE?si=-9XE7b4vi1BZC-re" target="_blank" rel="noopener">Listen</a>
                </div>
            </div>
            <div class="song-entry" id="joyce-manor-all-my-friends-are-so-depressed-song-review" data-artist="joyce manor  all my friends are so depressed">
                <h3 class="song-title">Joyce Manor - "All My Friends Are So Depressed"</h3>
                <p class="song-rating">1/4</p>
                <p class="song-date">August 18, 2025</p>
                <p class="song-description">Why is everyone trying to do alt-country poorly now. The Civil War reenactment of Old 97's no one asked for.</p>
                <div class="song-links">
                    <a href="https://youtu.be/NDmJDdFl_jI?si=I99dZE6IilHRunLr" target="_blank" rel="noopener">Listen</a>
                </div>
            </div>
            <div class="song-entry" id="horses-4k-barely-a-horse-mostly-a-pony-song-review" data-artist="horses 4k  barely a horse mostly a pony">
                <h3 class="song-title">Horses 4k - "Barely a Horse, Mostly a Pony"</h3>
                <p class="song-rating">3.5/4</p>
                <p class="song-date">August 15, 2025</p>
                <p class="song-description">The sound of a horse staring at the sea, pondering frisbees and Tolstoy. Seagulls heckle. The wind; it smells like Elvis's hairspray. And zoomers — bless them — think they invented y'alternative just to ban it, like they're trying to outlaw sadness itself.</p>
                <div class="song-links">
                    <a href="https://horses4k.bandcamp.com/album/nina" target="_blank" rel="noopener">Listen</a>
                </div>
            </div></div>`
            },
            newsletter: {
                title: "Newsletter",
                html: `<div class="section">
        <p>A link to the week's reviews every Friday, along with other "fun" links and "musings" on "life": <a href="https://bradygerber.com/newsletter/" target="_blank" rel="noopener">https://bradygerber.com/newsletter/</a></p>
    </div>`
            },
            podcast: {
                title: "Podcast",
                html: `<div class="section">
        <p>My reviews, but easier to understand: <a href="https://bradygerber.com/podcast-and-youtube/" target="_blank" rel="noopener">https://bradygerber.com/podcast-and-youtube/</a></p>
    </div>`
            },
            members: {
                title: "All Weekly Picks",
                html: `<div class="section">
        <div class="search-section">
            <input type="text" id="song-search" placeholder="Search for artist or song..." onkeyup="searchSongs()">
            <p class="search-help">Type a song title (e.g., "Like a Rolling Stone") or artist name to search</p>
        </div>
            <div class="song-entry" id="wednesday-bitter-everyday-song-review" data-artist="wednesday  bitter everyday">
                <h3 class="song-title">Wednesday - "Bitter Everyday"</h3>
                <p class="song-rating">0.5/4</p>
                <p class="song-date">August 19, 2025</p>
                <p class="song-description">I'd rather lick Kid Rock's dinghy than listen to any more 2020s shoegaze. Even mildew and regret got bored by this song.</p>
                <div class="song-links">
                    <a href="https://youtu.be/qGNRGk5TOLE?si=-9XE7b4vi1BZC-re" target="_blank" rel="noopener">Listen</a>
                </div>
            </div>
            <div class="song-entry" id="joyce-manor-all-my-friends-are-so-depressed-song-review" data-artist="joyce manor  all my friends are so depressed">
                <h3 class="song-title">Joyce Manor - "All My Friends Are So Depressed"</h3>
                <p class="song-rating">1/4</p>
                <p class="song-date">August 18, 2025</p>
                <p class="song-description">Why is everyone trying to do alt-country poorly now. The Civil War reenactment of Old 97's no one asked for.</p>
                <div class="song-links">
                    <a href="https://youtu.be/NDmJDdFl_jI?si=I99dZE6IilHRunLr" target="_blank" rel="noopener">Listen</a>
                </div>
            </div>
            <div class="song-entry" id="horses-4k-barely-a-horse-mostly-a-pony-song-review" data-artist="horses 4k  barely a horse mostly a pony">
                <h3 class="song-title">Horses 4k - "Barely a Horse, Mostly a Pony"</h3>
                <p class="song-rating">3.5/4</p>
                <p class="song-date">August 15, 2025</p>
                <p class="song-description">The sound of a horse staring at the sea, pondering frisbees and Tolstoy. Seagulls heckle. The wind; it smells like Elvis's hairspray. And zoomers — bless them — think they invented y'alternative just to ban it, like they're trying to outlaw sadness itself.</p>
                <div class="song-links">
                    <a href="https://horses4k.bandcamp.com/album/nina" target="_blank" rel="noopener">Listen</a>
                </div>
            </div>
            <div class="link-entry">
                <h3 class="link-title">The Evolution of Synthwave: From VHS to Spotify</h3>
                <p class="link-date">August 12, 2025</p>
                <p class="link-description">Sick.</p>
                <div class="link-links">
                    <a href="https://example.com/synthwave-evolution" target="_blank" rel="noopener">Read More</a>
                </div>
            </div>
            <div class="link-entry">
                <h3 class="link-title">Why We Love Sad Songs: The Science of Musical Emotion</h3>
                <p class="link-date">August 5, 2025</p>
                <p class="link-description">Sick.</p>
                <div class="link-links">
                    <a href="https://example.com/sad-songs-science" target="_blank" rel="noopener">Read More</a>
                </div>
            </div>
            <div class="link-entry">
                <h3 class="link-title">The Art of the Album Cover: 50 Years of Visual Music</h3>
                <p class="link-date">July 28, 2025</p>
                <p class="link-description">Sick.</p>
                <div class="link-links">
                    <a href="https://example.com/album-covers" target="_blank" rel="noopener">Read More</a>
                </div>
            </div>
            <div class="link-entry">
                <h3 class="link-title">How Streaming Changed the Way We Discover Music</h3>
                <p class="link-date">July 21, 2025</p>
                <p class="link-description">Sick.</p>
                <div class="link-links">
                    <a href="https://example.com/streaming-discovery" target="_blank" rel="noopener">Read More</a>
                </div>
            </div></div>`
            }
        };

        // Function to show content
        function showContent(page) {
            const container = document.getElementById('content-container');
            const freeLink = document.getElementById('free-link');
            const newsletterLink = document.getElementById('newsletter-link');
            const podcastLink = document.getElementById('podcast-link');
            
            // Update content
            container.innerHTML = content[page].html;
            
            // Update navigation styling and ARIA states
            freeLink.classList.remove('active');
            freeLink.setAttribute('aria-selected', 'false');
            newsletterLink.classList.remove('active');
            newsletterLink.setAttribute('aria-selected', 'false');
            podcastLink.classList.remove('active');
            podcastLink.setAttribute('aria-selected', 'false');
            
            if (page === 'free') {
                freeLink.classList.add('active');
                freeLink.setAttribute('aria-selected', 'true');
            } else if (page === 'newsletter') {
                newsletterLink.classList.add('active');
                newsletterLink.setAttribute('aria-selected', 'true');
            } else if (page === 'podcast') {
                podcastLink.classList.add('active');
                podcastLink.setAttribute('aria-selected', 'true');
            }
            
            // Update page title
            document.title = `OPE! - ${content[page].title}`;
            
            // Announce page change to screen readers
            announcePageChange(content[page].title);
        }
        
        // Function to announce page changes to screen readers
        function announcePageChange(pageTitle) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'sr-only';
            announcement.textContent = `Switched to ${pageTitle} page`;
            
            document.body.appendChild(announcement);
            
            // Remove after announcement
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }

        // Function to search albums
        function searchAlbums() {
            const searchTerm = document.getElementById('album-search').value.toLowerCase();
            const albumEntries = document.querySelectorAll('.song-entry[data-artist]');
            let visibleCount = 0;
            
            // Split search into individual terms
            const searchTerms = searchTerm.split(' ').filter(term => term.length > 0);
            
            albumEntries.forEach(entry => {
                const artistText = entry.getAttribute('data-artist');
                const titleText = entry.querySelector('.song-title').textContent.toLowerCase();
                const combinedText = `${artistText} ${titleText}`;
                
                let shouldShow = false;
                
                if (searchTerm === '') {
                    // Empty search shows everything
                    shouldShow = true;
                } else if (searchTerms.length === 1) {
                    // Single term search - check if it appears anywhere
                    shouldShow = combinedText.includes(searchTerms[0]);
                } else {
                    // Multi-term search - check if ALL terms appear somewhere
                    shouldShow = searchTerms.every(term => combinedText.includes(term));
                }
                
                if (shouldShow) {
                    entry.style.display = 'block';
                    visibleCount++;
                } else {
                    entry.style.display = 'none';
                }
            });
            
            // Show/hide "no results" message
            let noResultsMsg = document.getElementById('no-results-msg');
            if (!noResultsMsg) {
                noResultsMsg = document.createElement('p');
                noResultsMsg.id = 'no-results-msg';
                noResultsMsg.className = 'no-results';
                noResultsMsg.textContent = 'No results, sad.';
                const searchSection = document.querySelector('.search-section');
                if (searchSection) {
                    searchSection.appendChild(noResultsMsg);
                }
            }
            
            if (visibleCount === 0 && searchTerm !== '') {
                noResultsMsg.style.display = 'block';
            } else {
                noResultsMsg.style.display = 'none';
            }
        }

        // Function to search songs by artist name or song title
        // Supports multi-term search and shows "no results" message when needed
        function searchSongs() {
            const searchTerm = document.getElementById('song-search').value.toLowerCase();
            const songEntries = document.querySelectorAll('.song-entry[data-artist]'); // Songs now have data-artist
            let visibleCount = 0;
            
            // Split search into individual terms
            const searchTerms = searchTerm.split(' ').filter(term => term.length > 0);
            
            songEntries.forEach(entry => {
                const artistText = entry.getAttribute('data-artist');
                const titleText = entry.querySelector('.song-title').textContent.toLowerCase();
                const combinedText = `${artistText} ${titleText}`;
                
                let shouldShow = false;
                
                if (searchTerm === '') {
                    // Empty search shows everything
                    shouldShow = true;
                } else if (searchTerms.length === 1) {
                    // Single term search - check if it appears anywhere
                    shouldShow = combinedText.includes(searchTerms[0]);
                } else {
                    // Multi-term search - check if ALL terms appear somewhere
                    shouldShow = searchTerms.every(term => combinedText.includes(term));
                }
                
                if (shouldShow) {
                    entry.style.display = 'block';
                    visibleCount++;
                } else {
                    entry.style.display = 'none';
                }
            });
            
            // Show/hide "no results" message
            let noResultsMsg = document.getElementById('no-results-msg');
            if (!noResultsMsg) {
                noResultsMsg = document.createElement('p');
                noResultsMsg.id = 'no-results-msg';
                noResultsMsg.className = 'no-results';
                noResultsMsg.textContent = 'No results, sad.';
                const searchSection = document.querySelector('.search-section');
                if (searchSection) {
                    searchSection.appendChild(noResultsMsg);
                }
            }
            
            if (visibleCount === 0 && searchTerm !== '') {
                noResultsMsg.style.display = 'block';
            } else {
                noResultsMsg.style.display = 'none';
            }
        }

        // Show free page by default
        document.addEventListener('DOMContentLoaded', function() {
            // Check if there's a hash in the URL for direct navigation
            handleHashNavigation();
            
            // Show default page
            showContent('free');
        });

        // Function to share a song by copying its direct link to clipboard
        // Creates a unique URL with hash navigation for each song
        function shareSong(songId, songTitle) {
            const currentUrl = window.location.href.split('#')[0];
            const shareUrl = `${currentUrl}#${songId}`;
            
            // Simply copy the direct link to clipboard
            copyToClipboard(songId, songTitle, shareUrl);
        }
        

        
        // Function to copy link to clipboard
        function copyToClipboard(songId, songTitle, shareUrl) {
            const doSuccessUI = () => {
                // Show success message
                const shareBtn = document.querySelector(`#${songId} .share-btn`);
                
                if (shareBtn) {
                    const originalText = shareBtn.textContent;
                    shareBtn.textContent = '✅ Link Copied!';
                    shareBtn.classList.add('copied');
                    
                    setTimeout(() => {
                        shareBtn.textContent = originalText;
                        shareBtn.classList.remove('copied');
                    }, 2000);
                }
            };

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(shareUrl).then(doSuccessUI).catch(() => {
                    // Fallback below
                    try {
                        const ta = document.createElement('textarea');
                        ta.value = shareUrl;
                        ta.setAttribute('readonly', '');
                        ta.style.position = 'absolute';
                        ta.style.left = '-9999px';
                        document.body.appendChild(ta);
                        ta.select();
                        document.execCommand('copy');
                        document.body.removeChild(ta);
                        doSuccessUI();
                    } catch (err2) {
                        alert('Link: ' + shareUrl);
                    }
                });
            } else {
                // Fallback for insecure contexts
                try {
                    const ta = document.createElement('textarea');
                    ta.value = shareUrl;
                    ta.setAttribute('readonly', '');
                    ta.style.position = 'absolute';
                    ta.style.left = '-9999px';
                    document.body.appendChild(ta);
                    ta.select();
                    document.execCommand('copy');
                    document.body.removeChild(ta);
                    doSuccessUI();
                } catch (err3) {
                    alert('Link: ' + shareUrl);
                }
            }
        }
        


        // Function to share an album
        function shareAlbum(albumId, albumTitle) {
            const currentUrl = window.location.href.split('#')[0];
            const shareUrl = `${currentUrl}#${albumId}`;
            
            // Simply copy the direct link to clipboard
            copyToClipboard(albumId, albumTitle, shareUrl);
        }

        // Function to handle hash navigation
        function handleHashNavigation() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                // Find the element with this ID
                const targetElement = document.getElementById(hash);
                if (targetElement) {
                    // Determine which tab this element belongs to
                    if (hash.includes('-song-review')) {
                        showContent('free');
                    } else if (hash.includes('-album-review')) {
                        showContent('albums');
                    }
                    
                    // Wait for content to load, then scroll to element
                    setTimeout(() => {
                        targetElement.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                        
                        // Add a subtle highlight effect
                        targetElement.style.boxShadow = '0 0 20px rgba(0,123,255,0.3)';
                        setTimeout(() => {
                            targetElement.style.boxShadow = '';
                        }, 2000);
                    }, 100);
                }
            }
        }

        // Listen for hash changes
        window.addEventListener('hashchange', handleHashNavigation);

        // Back to top functionality
        const backToTopBtn = document.getElementById('back-to-top');
        
        // Show/hide button based on scroll position
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });
        
        // Smooth scroll to top when clicked
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Keyboard navigation for tabs
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
                const tabs = document.querySelectorAll('.nav a[role="tab"]');
                const currentTab = document.querySelector('.nav a[aria-selected="true"]');
                const currentIndex = Array.from(tabs).indexOf(currentTab);
                
                let nextIndex;
                if (e.key === 'ArrowRight') {
                    nextIndex = (currentIndex + 1) % tabs.length;
                } else {
                    nextIndex = (currentIndex - 1 + tabs.length) % tabs.length;
                }
                
                const nextTab = tabs[nextIndex];
                const page = nextTab.getAttribute('onclick').match(/'([^']+)'/)[1];
                showContent(page);
                nextTab.focus();
                e.preventDefault();
            }
        });
    </script>

                                                                                                                                                        <!-- Footer -->
<footer class="footer" role="contentinfo">
        
        <div class="footer-content">
            <div class="last-updated">
                <strong>Last updated:</strong> August 19, 2025 (Los Angeles, CA PST Time)
            </div>
            
            <div class="support-info">
                <strong>Best ways to support:</strong> Bookmark this page, subscribe to the newsletter and podcast, tell all your friends.
            </div>
            
            <div class="contact-info">
                Don't like my reviews? Email me at bradywgerber at gmail dot com to tell me why I'm wrong, or hate-click my <a href="https://bradygerber.com/" target="_blank" rel="noopener">website</a>.
            </div>
            
            <div class="footer-bottom">
                <img src="images/author.png" alt="Brady Gerber" class="author-image">
                <span class="copyright">&copy; 2025 OPE!. All rights reserved.</span>
            </div>
        </div>
    </footer>
</body>
</html>
